<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interactivo - Análisis Completo Venezuela</title>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
    <style>
        #map { height: 600px; width: 100%; }
        .legend { background: white; padding: 10px; line-height: 1.5; font-size: 12px; }
        .legend span { display: inline-block; width: 15px; height: 15px; margin-right: 5px; }
    </style>
</head>
<body>
    <h1>Mapa Interactivo - Análisis Completo de Venezuela (2024-2025)</h1>
    <div id="map"></div>
    <script>
        var map = L.map('map').setView([10, -66], 6); // Centrado en Venezuela
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        var noticias = [
            {categoria: "Energía", color: "yellow", coordenadas: [10.466, -66.879], descripcion: "Producción petrolera: La producción diaria promedio fue de 680.000 barriles por día【Fuente: <a href='https://www.opec.org' target='_blank'>Informe OPEP, diciembre 2024</a>】."},
            {categoria: "Energía", color: "yellow", coordenadas: [10.5, -72.0], descripcion: "Crisis eléctrica: Se documentaron 15.430 fallos de electricidad entre agosto de 2024 y febrero de 2025【Fuente: <a href='https://comiteapagones.org' target='_blank'>Comité de Afectados por los Apagones, febrero 2025</a>】."},
            {categoria: "Migración", color: "blue", coordenadas: [8.0, -80.7821], descripcion: "Crisis del Darién: 70% de los migrantes que cruzan esta peligrosa ruta son venezolanos【Fuente: <a href='https://defensoria.gob.pa' target='_blank'>Defensoría del Pueblo de Panamá, febrero 2025</a>】."},
            {categoria: "Seguridad", color: "red", coordenadas: [7.9, -72.5], descripcion: "Control territorial: El ELN y las FARC dominan 15 municipios fronterizos【Fuente: <a href='https://www.pares.com.co' target='_blank'>Fundación Paz y Reconciliación, noviembre 2024</a>】."},
            {categoria: "Narcotráfico", color: "green", coordenadas: [9.5, -71.1], descripcion: "Pistas clandestinas: Se identificaron más de 200 pistas ilegales en Apure y Bolívar【Fuente: <a href='https://www.insightcrime.org' target='_blank'>Reporte Insight Crime, febrero 2025</a>】."},
            {categoria: "Sanciones", color: "orange", coordenadas: [10.496, -66.849], descripcion: "Sanciones individuales: La UE y Canadá sancionaron a 15 nuevos funcionarios vinculados a violaciones de derechos humanos【Fuente: <a href='https://elpais.com' target='_blank'>Diario El País, noviembre 2024</a>】."},
            {categoria: "Relaciones Internacionales", color: "purple", coordenadas: [10.5, -66.85], descripcion: "Rusia e Irán: Ampliación de la cooperación militar y tecnológica【Fuente: <a href='https://tass.com' target='_blank'>Agencia Tass, diciembre 2024</a>】."}
        ];

        noticias.forEach(function(noticia) {
            L.circleMarker(noticia.coordenadas, {
                radius: 8,
                color: noticia.color,
                fillColor: noticia.color,
                fillOpacity: 0.7
            }).addTo(map).bindPopup(`<b>${noticia.categoria}</b><br>${noticia.descripcion}`);
        });

        // Añadir leyenda
        var legend = L.control({position: 'bottomright'});
        legend.onAdd = function () {
            var div = L.DomUtil.create('div', 'legend');
            div.innerHTML += '<b>Leyenda</b><br>';
            div.innerHTML += '<span style="background: yellow"></span> Energía<br>';
            div.innerHTML += '<span style="background: blue"></span> Migración<br>';
            div.innerHTML += '<span style="background: red"></span> Seguridad<br>';
            div.innerHTML += '<span style="background: green"></span> Narcotráfico<br>';
            div.innerHTML += '<span style="background: orange"></span> Sanciones<br>';
            div.innerHTML += '<span style="background: purple"></span> Relaciones Internacionales<br>';
            return div;
        };
        legend.addTo(map);
    </script>
</body>
</html>
